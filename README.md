# 目录 

- [规划器](#规划器) 
  - [A*](#A*) 
  - [Dijkstra](#Dijkstra) 
- [跟踪器](#跟踪器) 
  - [Pure Pursuit](#Pure Pursuit) 
  - [Stanley](#Stanley) 
  - [增量PID](#增量PID) 
  - [位置PID](#位置PID) 
  - [LQR](#LQR) 
- [结果展示](#结果展示)

- [如何运行](#如何运行)

# 路径规划与跟踪

## 规划器

### A*

A-star算法使用启发式搜索，启发式搜索是一种通过启发式函数来优化搜索效率的方法。启发式函数H(n)评估了从节点n到目标节点的预期成本，用于指导搜索过程朝着最有希望的方向前进。在A-star算法中，启发式函数结合了实际成本（从起始点到当前节点的路径成本G(n)）和预估成本（从当前节点到目标节点的估计成本H(n)），帮助算法决定下一步要探索的节点。A-star算法通过维护一个优先级队列（通常使用最小堆实现）来按照最小化的总预估成本搜索路径。

### Dijkstra

Dijkstra算法基于贪心策略，通过逐步扩展离起始节点最近的节点来实现最短路径的计算。其核心思想是维护一个距离起始节点的最短路径长度的集合，并通过每一步选择当前最短路径的节点进行扩展，直到所有节点都被遍历。它不需要启发式函数，适用于需要精确最短路径计算的场景。

## 跟踪器

### Pure Pursuit

纯跟踪算法模拟了人类驾驶车辆时的自然行为：在人类驾驶车辆时，为了跟踪一条期望的轨迹，驾驶员通常会选择一个距离车辆当前位置一定距离的点作为目标，然后调整方向盘，使车辆行驶到该点。纯跟踪算法借鉴了这种思维方式，选择预定路径上的一个目标点，通过调整车辆的转向角度，使车辆沿着圆弧轨迹驶向目标点，进而实现路径跟踪。

纯跟踪算法的核心思想是选择预定路径上的一个目标点（追踪点），计算从当前车辆位置到该点的轨迹曲率，从而生成控制命令，引导车辆沿路径行驶。具体步骤如下：

1. **路径点选择**：根据车辆当前位置，在预定路径上选择一个距离车辆一定距离的目标点。
2. **计算轨迹曲率**：根据车辆位置、目标点位置和路径曲率，计算车辆需要转向的角度。
3. **生成控制命令**：根据计算的转向角度，生成相应的转向命令，控制车辆行驶。

### Stanley

Stanley控制算法是一种基于横向误差的跟踪算法。Stanley 控制器的核心思想是通过调整车辆的转向角度，使车辆的前轴朝向路径上的最近点，并最小化车辆的横向误差和航向误差。与纯跟踪算法不同，Stanley 控制器不仅考虑车辆当前位置与路径的偏差，还考虑车辆的航向角误差。

Stanley 控制器通过以下两个主要步骤实现路径跟踪：

1. **横向误差校正**：计算车辆前轴中心到路径的最近点的横向误差，并生成相应的转向角度来减小该误差。
2. **航向误差校正**：计算车辆朝向与路径切线方向之间的航向误差，并生成相应的转向角度来减小该误差。

### 增量PID

增量式 PID 控制器的核心思想是通过计算当前时刻的控制量相对于上一时刻的增量来调节系统的输出。与传统 PID 控制器不同，增量式 PID 控制器仅计算控制量的增量，避免了累积误差的直接影响，从而提高了系统的抗干扰能力。

### 位置PID

位置式PID控制器基于当前时刻的误差，积分误差 和误差变化率 ，通过如下公式计算控制量：

$$
u(t) = K_p \cdot e(t) + K_i \cdot \int_{0}^{t} e(\tau) \, d\tau + K_d \cdot \frac{de(t)}{dt}
$$


### LQR

LQR 控制器的目标是设计一个状态反馈控制器 u(t) = -Kx(t) ，其中K是状态反馈增益矩阵，使得系统的性能指标最优化。性能指标通常定义为系统状态 x(t) 和控制输入u(t) 的二次型损失函数的积分：

$$
J = \int_{0}^{\infty} \left( x^T Q x + u^T R u \right) \, dt
$$

## 结果展示

**A***

<img src=\pic\aster.png alt="image-20240614090104863" width="700" />

**Dijkstra**

<img src=\pic\Dijkstra.png alt="image-20240614090104863" width="700" />

**A* 和Pure Pursuit**

<img src=\pic\Apure.png alt="image-20240614090104863" width="700" />

**A* 和LQR**

<img src=\pic\Alqr.png alt="image-20240614090104863" width="700" />

## 如何运行

1. ### 配置运行环境

   在自己所使用的环境中安装依赖库。

   ```python
   pip install requirements.txt
   ```

2. ### 参数选择

   在config.py文件中修改运行参数。

   ```python
   configs = {
       "grid_size":100,
       "start":(1,1),
       "goal":(99,99),
   
       "规划算法":"astar",
       # "规划算法":"Dijkstra",
   
       "追踪算法":"pure_pursuit",
       # "追踪算法":"stanley",
       # "追踪算法":"increase_pid",
       # "追踪算法":"position_pid",
       # "追踪算法":"lqr",
   
       "偏转角":0,
       "速度":30,
       "车轮间距":0.5,
       "间隔时间":0.01,
   }
   ```

3. ### 运行

   在终端输入命令：

   ```python
   python run.py
   ```


